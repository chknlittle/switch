# XMPP OpenCode Bridge Configuration

# XMPP server settings
XMPP_SERVER=your.xmpp.server
XMPP_DOMAIN=your.xmpp.server

# Orchestrator accounts (one per AI engine)
CC_JID=cc@your.xmpp.server
CC_PASSWORD=your_cc_password
OC_JID=oc@your.xmpp.server
OC_PASSWORD=your_oc_password
OC_GPT_JID=oc-gpt@your.xmpp.server
OC_GPT_PASSWORD=your_oc_gpt_password

# Your user account (receives messages)
XMPP_RECIPIENT=user@your.xmpp.server

# Switch directory service account (XEP-0030 + publishes refresh pings)
# IMPORTANT: use a *full* JID resource so disco#items reaches the connected client
# (ejabberd otherwise answers disco for bare user JIDs itself).
SWITCH_DIRECTORY_JID=switch-dir@your.xmpp.server/directory
SWITCH_DIRECTORY_PASSWORD=your_directory_password

# PubSub service JID (ejabberd mod_pubsub)
# Usually: pubsub.<domain>
SWITCH_PUBSUB_JID=pubsub.your.xmpp.server

# Auto-create the directory XMPP account on startup (best-effort)
SWITCH_DIRECTORY_AUTOCREATE=1

# Working directory for AI sessions
CLAUDE_WORKING_DIR=/home/user

# OpenCode model selection (used by Switch when choosing a default model)
# Example: OPENCODE_MODEL_DEFAULT=glm_vllm/glm-4.7-flash-heretic.Q8_0.gguf
OPENCODE_MODEL_DEFAULT=glm_vllm/glm-4.7-flash

# Optional model overrides for named OpenCode dispatchers
OPENCODE_MODEL_GPT=openai/gpt-5.2
OPENCODE_MODEL_CODEX=openai/gpt-5.3-codex
OPENCODE_MODEL_ZEN=opencode/glm-4.7
OPENCODE_MODEL_GPT_OR=openrouter/openai/gpt-5.2
OPENCODE_MODEL_KIMI_CODING=kimi-for-coding/kimi-k2.5

# Dynamic dispatchers (supports 1..N dispatchers)
# If set, SWITCH_DISPATCHERS_JSON / SWITCH_DISPATCHERS_FILE override legacy
# per-dispatcher env vars (CC_JID, OC_JID, ...).
# JSON can be either a list or an object map.
# Example list entry fields:
#   name, jid, password or password_env, engine, agent, model_id,
#   label, direct, disabled
# SWITCH_DISPATCHERS_JSON=[{"name":"oc","jid":"oc@your.xmpp.server","password_env":"OC_PASSWORD","engine":"opencode","agent":"bridge","model_id":"glm_vllm/glm-4.7-flash","label":"OpenCode"}]
# SWITCH_DISPATCHERS_FILE=/home/user/switch-dispatchers.json

# Tool input logging controls
# SWITCH_LOG_TOOL_INPUT=1
# SWITCH_LOG_TOOL_INPUT_MAX=2000

# ejabberd control command (local or via SSH)
EJABBERD_CTL=/usr/sbin/ejabberdctl
# Or via SSH: ssh user@your.xmpp.server /path/to/ejabberdctl
